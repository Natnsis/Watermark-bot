// prisma/schema.prisma
datasource db {
  provider  = "postgresql"
  url  	    = env("DATABASE_URL")
  // uncomment next line if you use Prisma <5.10
  // directUrl = env("DATABASE_URL_UNPOOLED")
}

model User {
  id          Int       @id @default(autoincrement())
  telegramId  String    @unique
  name        String?
  channel     Channel?  @relation(fields: [channelId], references: [id])
  channelId   Int?
  refinements Refinement[]
}

model Channel {
  id          Int       @id @default(autoincrement())
  telegramId  String    @unique
  name        String?
  users       User[]
  watermarks  Watermark[]
}

model Watermark {
  id        Int     @id @default(autoincrement())
  text      String
  channel   Channel @relation(fields: [channelId], references: [id])
  channelId Int
}

model Refinement {
  id          Int       @id @default(autoincrement())
  type        String    // 'grammar', 'funny', 'professional'
  user        User      @relation(fields: [userId], references: [id])
  userId      Int
  description String?   // optional, for extra info
}
